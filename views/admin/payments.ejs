<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagos Registrados - LoveDoc</title>
    <link rel="stylesheet" href="/stylesheets/admin_payment.css">
</head>
<body>
    <header>
        <h1>Administraci√≥n de Pagos</h1>
        <nav>
            <ul class="nav-links">
                <li><a href="/">Inicio</a></li>
                <li><a href="/admin/contacts">Contactos</a></li>
                <li><a href="/admin/payments">Pagos</a></li>
                <li><a href="/payment">Realizar Pago</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>Lista de Pagos Registrados</h2>

        <% if (message) { %>
            <p class="error-text"><%= message %></p>
        <% } %>

        <!-- Filtros y b√∫squeda -->
        <section class="filters">
            <input type="text" id="search" placeholder="Buscar por email o servicio...">
            <button class="filter-button">Filtrar</button>
        </section>

        <% if (payments.length > 0) { %>
            <table class="payments-table">
                <thead>
                    <tr>
                        <th>#ID</th>
                        <th>Servicio</th>
                        <th>Email</th>
                        <th>Nombre en tarjeta</th>
                        <th>Expiraci√≥n</th>
                        <th>Monto</th>
                        <th>Moneda</th>
                        <th>Fecha</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% payments.forEach(payment => { %>
                        <tr>
                            <td><%= payment.id %></td>
                            <td><%= payment.service %></td>
                            <td><%= payment.email %></td>
                            <td><%= payment.cardName %></td>
                            <td><%= payment.expMonth %>/<%= payment.expYear %></td>
                            <td><%= payment.amount %></td>
                            <td><%= payment.currency %></td>
                            <td><%= new Date(payment.created_at).toLocaleDateString() %></td>
                            <td>
                                <a href="/admin/payments/view/<%= payment.id %>" class="action-button view">üîç Ver</a>
                                <a href="/admin/payments/delete/<%= payment.id %>" class="action-button delete">üóë Eliminar</a>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <p>No hay pagos registrados a√∫n.</p>
        <% } %>

        <!-- Estad√≠sticas -->
        <section class="statistics">
            <h2>Resumen de Pagos</h2>
            <p>üí≥ Total de pagos procesados: <strong><%= payments.length || 0 %></strong></p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 LoveDoc - Todos los derechos reservados.</p>
    </footer>
    <script src="/scripts/scripts.js"></script>
</body>
</html>