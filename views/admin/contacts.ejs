<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administraci√≥n de Contactos - LoveDoc</title>
    <link rel="stylesheet" href="/stylesheets/admin_contact.css">
</head>

<body>
    <header>
        <h1>Panel de Administraci√≥n - Contactos</h1>
        <nav>
            <ul class="nav-links">
                <li><a href="/">Inicio</a></li>
                <li><a href="/admin/contacts">üìÇ Contactos</a></li>
                <li><a href="/admin/payments">üí≥ Pagos</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>Lista de Contactos</h2>

        <% if (typeof message !== "undefined" && message) { %>
            <p class="success"><%= message %></p> 
        <% } %>

        <% if (errors && errors.length > 0) { %>
            <ul class="error-list">
                <% errors.forEach(error => { %>
                    <li class="error-text">‚ö† <%= error %></li>
                <% }); %>
            </ul>
        <% } %>

        <!-- Filtros y b√∫squeda -->
        <section class="filters">
            <input type="text" id="search" placeholder="Buscar por nombre o email...">
            <button class="filter-button">Filtrar</button>
        </section>

        <table class="contacts-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Email</th>
                    <th>Comentario</th>
                    <th>IP</th>
                    <th>Fecha</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <% if (contacts && contacts.length > 0) { %>
                    <% contacts.forEach(contact => { %>
                        <tr>
                            <td><%= contact.id %></td>
                            <td><%= contact.nombre %></td>
                            <td><%= contact.email %></td>
                            <td><%= contact.comment %></td>
                            <td><%= contact.ip %></td>
                            <td><%= contact.date %></td>
                            <td>
                                <a href="/admin/contacts/view/<%= contact.id %>" class="action-button view">üîç Ver</a>
                                <a href="/admin/contacts/delete/<%= contact.id %>" class="action-button delete">üóë Eliminar</a>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="7">No hay contactos registrados.</td>
                    </tr>
                <% } %>
            </tbody>
        </table>

        <!-- Estad√≠sticas -->
        <section class="statistics">
            <h2>Estad√≠sticas de Contactos</h2>
            <p>üìß Total de contactos registrados: <strong><%= contacts.length || 0 %></strong></p>
            <% if (typeof recentContacts !== "undefined") { %>
                <p>üîç Contactos en el √∫ltimo mes: <strong><%= recentContacts || 0 %></strong></p>
            <% } else { %>
                <p>üîç Contactos en el √∫ltimo mes: <strong>0</strong></p>
            <% } %>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 LoveDoc. Todos los derechos reservados.</p>
    </footer>
    <script src="/scripts/scripts.js"></script>
</body>
</html>